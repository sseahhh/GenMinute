
{% extends "layout.html" %}

{% block title %}새 회의록 작성{% endblock %}

{% block content %}
<main class="content-panel">
    <header class="content-header">
        <input type="text" name="title" form="upload-form" placeholder="제목을 입력 해주세요" class="title-input">
    </header>
    {% if error %}
        <div class="flash-error">{{ error }}</div>
    {% endif %}
    <form class="meeting-form" id="upload-form" method="POST" action="{{ url_for('meetings.upload_and_process') }}" enctype="multipart/form-data" novalidate>
        <div class="form-group">
            <div class="drop-zone" id="drop-zone">
                <input type="file" id="audio-file-input" name="audio_file" accept=".wav,.mp3,.m4a,.flac,.mp4" style="display: none;" required>
                <div class="drop-zone-icon">&#128229;</div>
                <p>음성 파일을 여기로 끌어놓으시면 업로드가 시작됩니다</p>
                <button type="button" class="btn-primary" id="upload-button">파일 선택</button>
                <p id="file-name-display" class="file-name-display"></p>
                <p class="file-types-small">(파일형식: .wav, .mp3, .m4a, .flac, .mp4)</p>
            </div>
            <button type="submit" id="submit-button" class="btn-primary" style="display: none; margin-top: 1.5rem; width: 100%;">노트 생성</button>
        </div>
    </form>

    <!-- 프로그레스 모달 -->
    <div id="progress-modal" class="progress-modal">
        <div class="progress-modal-content">
            <!-- 단계 표시 -->
            <div class="step-indicator">
                <div class="step" id="step-upload">
                    <div class="step-icon">📤</div>
                    <div class="step-label">업로드</div>
                </div>
                <div class="step-arrow">→</div>
                <div class="step" id="step-stt">
                    <div class="step-icon">🎤</div>
                    <div class="step-label">음성인식</div>
                </div>
                <div class="step-arrow">→</div>
                <div class="step" id="step-summary">
                    <div class="step-icon">📝</div>
                    <div class="step-label">요약생성</div>
                </div>
                <div class="step-arrow">→</div>
                <div class="step" id="step-mindmap">
                    <div class="step-icon">🗺️</div>
                    <div class="step-label">마인드맵</div>
                </div>
            </div>

            <!-- 현재 진행 아이콘 및 상태 -->
            <div class="progress-icon" id="progress-icon">📤</div>
            <p id="progress-status">파일을 업로드하고 있습니다...</p>

            <!-- 로딩 스피너 -->
            <div class="spinner"></div>

            <p class="progress-tip">잠시만 기다려주세요</p>
        </div>
    </div>
</main>
{% endblock %}
